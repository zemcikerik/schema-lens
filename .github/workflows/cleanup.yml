on:
  schedule:
    - cron: '0 0 * * MON'
  workflow_dispatch:
    inputs:
      dry_run:
        type: boolean
        required: false
        default: false
        description: Preview cleanup without actually removing any packages.

name: Cleanup packages

jobs:
  cleanup:
    name: Cleanup packages
    runs-on: ubuntu-latest
    permissions:
      packages: write
    steps:
      - name: Cleanup
        uses: dataaxiom/ghcr-cleanup-action@v1
        with:
          delete-untagged: true
          older-than: 1 week
          packages: schema-lens/api,schema-lens/ui,schema-lens/reverse-proxy,schema-lens/formatter
          dry-run: ${{ github.event.inputs.dry_run == 'true' }}
